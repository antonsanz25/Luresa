<div class="productos-container">
  <!-- üß≠ ENCABEZADO -->
  <section class="encabezado">
    <h1>Lista de Productos</h1>
    <p>
      Encuentra los mejores productos tecnol√≥gicos: laptops, componentes, tablets,
      y m√°s con precios competitivos. Usa los filtros para encontrar justo lo que buscas.
    </p>
  </section>

  <section class="filtros">
  <mat-form-field appearance="outline" class="campo-busqueda">
    <mat-label>Buscar producto</mat-label>
    <input
      matInput
      placeholder="Ej. Laptop, Monitor, Impresora"
      [(ngModel)]="filtroBusqueda"
      (input)="actualizarFiltro()" />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  <mat-form-field appearance="outline" class="campo-categoria">
    <mat-label>Categor√≠a</mat-label>
    <mat-select [(ngModel)]="categoriaSeleccionada" (selectionChange)="actualizarFiltro()">
      <mat-option value="">Todas</mat-option>
      @for (cat of categorias; track cat) {
        <mat-option [value]="cat">{{ cat }}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <div class="campo-precio">
    <label>Rango de precio</label>
    <mat-slider
      min="0"
      max="10000"
      step="100"
      thumbLabel
      tickInterval="1000"
      [(ngModel)]="precioMaximo"
      (input)="actualizarFiltro()">
    </mat-slider>
    <span class="precio-valor">Hasta ${{ precioMaximo }}</span>
  </div>
</section>

  <!-- üß© LISTADO DE PRODUCTOS -->
  <section class="productos-grid">
    @if (productosFiltrados.length === 0) {
      <p class="sin-resultados">No hay productos que coincidan con los filtros.</p>
    } @else {
      @for (item of productosFiltrados; track item.nombre) {
        <mat-card class="producto-item">
          <img mat-card-image [src]="item.imagen" alt="{{ item.nombre }}">
          <mat-card-content>
            <h3>{{ item.nombre }}</h3>
            <p class="descripcion">{{ item.descripcion }}</p>
            <p class="meta">
              üí≤ {{ item.precio }} | Cantidad: {{ item.cantidad }}
            </p>
          </mat-card-content>
          <mat-card-actions>
            <button
            mat-raised-button
            color="accent"
            class="boton-comprar"
            (click)="agregarAlCarrito(item)"
            >
            üõí Agregar al carrito
            </button>
            <button mat-stroked-button color="primary" class="boton-detalle">
              üîç Ver detalles
            </button>
          </mat-card-actions>
        </mat-card>
      }
    }
  </section>
</div>
